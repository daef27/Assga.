<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login Cliente - ASSGA</title>

<style>
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:Arial, sans-serif;
}

body{
  background:linear-gradient(135deg,#003366,#0055aa);
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  height:100vh;
}

h1{
  color:white;
  margin-bottom:20px;
}

.login-box{
  background:white;
  padding:30px;
  border-radius:12px;
  box-shadow:0 15px 40px rgba(0,0,0,0.3);
  width:320px;
  display:flex;
  flex-direction:column;
  gap:15px;
}

.login-box input{
  padding:12px;
  border-radius:6px;
  border:1px solid #ccc;
  font-size:14px;
}

.login-box input:focus{
  outline:none;
  border:1px solid #003366;
}

button{
  padding:12px;
  border:none;
  border-radius:6px;
  background:#003366;
  color:white;
  font-size:15px;
  cursor:pointer;
  transition:0.3s;
}

button:hover{
  background:#0055aa;
}

.erro{
  color:red;
  font-size:13px;
  text-align:center;
}
</style>

</head>
<body>

<h1>Login Cliente</h1>

<div class="login-box">
  <input type="text" id="cpf" placeholder="CPF 000.000.000-00" maxlength="14">
  <input type="password" id="senha" placeholder="Senha 4 n칰meros" maxlength="4">
  <button onclick="loginCliente()">Entrar</button>
  <div id="mensagem" class="erro"></div>
</div>

<script>

// M치scara autom치tica CPF
document.getElementById("cpf").addEventListener("input", function(e){
  let value = e.target.value.replace(/\D/g,"");
  value = value.replace(/(\d{3})(\d)/,"$1.$2");
  value = value.replace(/(\d{3})(\d)/,"$1.$2");
  value = value.replace(/(\d{3})(\d{1,2})$/,"$1-$2");
  e.target.value = value;
});

function loginCliente(){

  const cpfDigitado = document.getElementById("cpf").value.trim();
  const senhaDigitada = document.getElementById("senha").value.trim();
  const msgErro = document.getElementById("mensagem");

  let usuarios = JSON.parse(localStorage.getItem("usuarios")) || [];

  // 游댌 procura usu치rio pelo cpf e senha
  const usuario = usuarios.find(u => 
      u.cpf === cpfDigitado && 
      u.senha === senhaDigitada
  );

  if(usuario){

      if(usuario.tipo === "admin"){
          localStorage.setItem("adminLogado","true");
          localStorage.setItem("usuarioAtual", JSON.stringify(usuario));
          window.location.href = "painel-admin.html";
      }

      if(usuario.tipo === "cliente"){
          localStorage.setItem("clienteLogado","true");
          localStorage.setItem("usuarioAtual", JSON.stringify(usuario));
          window.location.href = "carteira.html";
      }

  } else {
      msgErro.innerText = "CPF ou senha inv치lido!";
  }
}

</script>

</body>
</html>